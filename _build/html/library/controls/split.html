
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenLayers.Control.Split &mdash; OpenLayers</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="OpenLayers" href="../../index.html" />
    <link rel="up" title="Controls" href="../controls.html" />
    <link rel="next" title="Formats" href="../formats.html" />
    <link rel="prev" title="OpenLayers.Control.Snapping" href="snapping.html" />
  <link rel="stylesheet" href="http://openlayers.org/two/css/common.css" type="text/css" />
  <link rel="stylesheet" href="http://openlayers.org/two/css/website.css" type="text/css" />
  <meta name="verify-v1" content="p07VY29NG/hLEwVP1RyE0P1chgYyekPikjkMUEgrVAI=" />
  <!--[if lt IE 7]>
  <script defer="defer" type="text/javascript" src="http://openlayers.org/pngfix.js"></script>
  <![endif]-->
  <style type='text/css'>
    body {
     font-family: sans-serif;
     font-size: .9em;
    }
  </style>

  </head>
  <body role="document">
<div id="olbanner">
<img class="openlayersbannerimg" src="http://openlayers.org/two/images/OpenLayers.trac.png" style="height: 44px; width: 49px;border:0px" alt="OpenLayers" />
<a class="openlayersbanner" href="http://www.openlayers.org/two/" >
OpenLayers 2</a>
</div>
<div id="navcontainer">
<a class="navtabtraccurrent" href="http://www.openlayers.org">Home</a>
<a class="navtab" href="http://trac.osgeo.org/openlayers">Support &amp; Development</a>
</div>

<div id="mainnav" class="nav"><ul><li class="first"><a href="http://www.openlayers.org/sponsorship/">Sponsorship</a></li><li><a href="http://trac.openlayers.org/wiki" accesskey="1">Wiki</a></li><li><a href="http://openlayers.org/blog/">Blog</a></li><li><a href="http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions">FAQ</a></li><li><a href="http://trac.osgeo.org/openlayers/wiki/HowToDownload" accesskey="3">Download</a></li><li><a href="http://trac.osgeo.org/openlayers/wiki/MailingLists">Email Lists</a></li></ul></div>



    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../formats.html" title="Formats"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="snapping.html" title="OpenLayers.Control.Snapping"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenLayers</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Table of Contents</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >OpenLayers Library Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../controls.html" accesskey="U">Controls</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../../contents.html">Table of Contents</a><ul>
  <li><a href="../index.html">OpenLayers Library Documentation</a><ul>
  <li><a href="../controls.html">Controls</a><ul>
      <li>Previous: <a href="snapping.html" title="previous chapter">OpenLayers.Control.Snapping</a></li>
      <li>Next: <a href="../formats.html" title="next chapter">Formats</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/library/controls/split.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div><div class="body">
<h3 style="background-color: yellow">You are viewing outdated docs</h3>
<p>OpenLayers 2.x is not under active development any more. Go to <a href="http://openlayers.org/en/latest/doc/">http://openlayers.org/en/latest/doc/</a> to view the latest OpenLayers 3.x docs.</p>
</div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="openlayers-control-split">
<span id="control-split-detail"></span><h1>OpenLayers.Control.Split<a class="headerlink" href="#openlayers-control-split" title="Permalink to this headline">Â¶</a></h1>
<p>Provides an agent for splitting linear features on a vector layer given edits to linear features on any other vector layer or a temporary sketch layer.  The control operates in two modes.  By default, the control allows for temporary features to be drawn on a sketch layer (managed by the control) that will be used to split eligible features on the target layer.  In auto-split mode, the control listens for edits (new features or modifications to existing features) on an editable layer and splits eligible features on a target layer.</p>
<p>The control can be added to a map as with other controls.  It has no distinct visual representation but can be connected to a button or other tool to toggle activation with a click.  In addition, no GUI elements are provided for control configuration.  Collecting user input to configure behavior of the control is an application specific task.</p>
<p>See the <a class="reference external" href="http://dev.openlayers.org/apidocs/files/OpenLayers/Control/Split-js.html">Split API docs</a> for a complete list of configuration options.  The <a class="reference external" href="http://openlayers.org/dev/examples/split-feature.html">basic split feature example</a> demonstrates use of the control in a complete example, and the <a class="reference external" href="http://openlayers.org/dev/examples/split-feature.html">snap split example</a> demonstrates the Split control in conjunction with the <a class="reference internal" href="snapping.html#control-snapping-detail"><span class="std std-ref">Snapping</span></a> control.  While the other samples below are not complete working examples, they are intended to demonstrate different aspects of the control&#8217;s behavior.</p>
<p>Example usage:</p>
<ol class="arabic simple">
<li>Create a split control that allows temporary features to be drawn for use in splitting roads.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span><span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">});</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Create a control that listens for edits on the roads layer and splits existing roads with any newly created or modified roads on the same layer.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span><span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span> <span class="nx">source</span><span class="o">:</span> <span class="nx">roads</span><span class="p">});</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Create a control that only allows roads with a dirt surface to be split.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span>
    <span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span>
    <span class="nx">targetFilter</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">Comparison</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Filter</span><span class="p">.</span><span class="nx">Comparison</span><span class="p">.</span><span class="nx">EQUAL_TO</span><span class="p">,</span>
        <span class="nx">property</span><span class="o">:</span> <span class="s2">&quot;surface&quot;</span><span class="p">,</span>
        <span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;dirt&quot;</span>
    <span class="p">})</span>
<span class="p">});</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Do not create segments shorter than some tolerance - for intersections that occur within this distance of an existing vertex, the existing vertex will be used to split the line instead of the calculated intersection point.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span>
    <span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span>
    <span class="nx">source</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span>
    <span class="nx">tolerance</span><span class="o">:</span> <span class="mf">0.01</span> <span class="c1">// same units as roads geometries</span>
<span class="p">});</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Create a listener for splits that modifies feature attributes.</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span>
    <span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span>
    <span class="nx">eventListeners</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;split&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">road</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">event</span><span class="p">.</span><span class="nx">features</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">road</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">features</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="c1">// attributes are cloned from original</span>
                <span class="nx">road</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="s2">&quot;length&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">road</span><span class="p">.</span><span class="nx">getLength</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Defer deletion of split features.  Assuming a separate strategy that saves feature edits and a protocol that manages the communication, the control can be configured to set feature state instead of actually destroying split features.  Features that are split will be given the DELETE state unless they are pending INSERT (in which case they are destroyed immediately).  All new features get the INSERT state (regardless of the deferDelete value).</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Assume a vector layer named &quot;roads&quot;.</span>
<span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">Split</span><span class="p">({</span>
    <span class="nx">layer</span><span class="o">:</span> <span class="nx">roads</span><span class="p">,</span>
    <span class="nx">deferDelete</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">tolerance</span><span class="o">:</span> <span class="mf">0.001</span>
<span class="p">});</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
    &copy; Copyright 2008, OpenLayers.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2577926-1");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>